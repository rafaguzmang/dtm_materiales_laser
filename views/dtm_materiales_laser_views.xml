<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <data>
        <record id="dtm_materiales_laser_tree" model="ir.ui.view">
            <field name="name">dtm_materiales_laser_tree</field>
            <field name="model">dtm.materiales.laser</field>
            <field name="arch" type="xml">
                <tree create="false" decoration-success="en_corte" >
                    <field name="orden_trabajo" />
                    <field name="tipo_orden" />
                    <field name="revision_ot" />
                    <field name="fecha_entrada" />
                    <field name="nombre_orden" />
                    <field name="primera_pieza" />
                    <field name="tiempo_teorico" />
                    <field name="status" widget="progressbar"/>
                    <field name="usuario" invisible="1"/>
                    <field name="permiso" invisible="1"/>
                    <field name="en_corte" invisible="1"/>

                </tree>
            </field>
        </record>
        <record id="dtm_materiales_laser_accion" model="ir.actions.act_window">
            <field name="name">Cortadora Laser</field>
            <field name="res_model">dtm.materiales.laser</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="dtm_materiales_laser_tree" />
        </record>
        <record id="dtm_materiales_laser_form" model="ir.ui.view">
            <field name="name">dtm.materiales.laser.form</field>
            <field name="model">dtm.materiales.laser</field>
            <field name="arch" type="xml">
                <form string="formulario">
                     <header>
                         <button type="object" name="action_finalizar" string="FINALIZAR ORDEN" icon="fa-print" title="print" class="btn btn-primary" attrs="{'invisible':[('finalizado','!=',True)]}" />
                      </header>
                    <sheet>
                        <group class="d-flex justify-content-between" >
                            <group class="col-6">
                                <field name="orden_trabajo"/>
                                <field name="tipo_orden" />
                                <field name="revision_ot" />
                                <field name="create_date" string="Fecha de Entrada" readonly="1"/>
                                <field name="nombre_orden"/>
                                <field name="primera_pieza" />
                                <field name="finalizado" invisible="1" />
                            </group>
                            <group class="col-6">
                                <field name="tiempo_teorico"/>
                            </group>
                        </group>

                         <notebook>
                                <page string="Archivos">
                                    <field name="permiso" invisible="1"/>
                                    <field name="cortadora_id" options="{'no_create': True,  'no_delete': True}" attrs="{'readonly':[('permiso','!=',True)]}" >
                                        <tree>
                                            <field name="nombre" />
                                            <field name="lamina" />
                                            <field name="cantidad" />
                                            <field name="cortadora" />
                                            <field name="contador"  readonly ="0"/>
                                            <field name="cortado" invisible="1" />
                                            <field name="start" invisible="1"/>
<!--                                            <field name="priority" widget="priority" attrs="{'readonly':[('permiso','!=',True)]}"/>-->
                                            <field name="priority" widget="priority" />
                                            <field name="status_bar" widget="progressbar"/>
                                            <field name="tiempo_teorico" />
                                            <field name="tiempo_total"/>
                                            <field name="fecha_corte" attrs="{'invisible':[('permiso','!=',True)]}"/>
                                            <field name="usuario" invisible="1"/>
                                            <field name="permiso" invisible="1"/>
                                        </tree>
                                        <form>
                                            <group >
<!--                                                <field name="fecha_corte" attrs="{'invisible':[('permiso','!=',True)]}"/>-->
                                                <field name="fecha_corte"/>
                                                <field name="documentos" filename="nombre" widget="pdf_viewer"></field>
                                                <field name="nombre" invisible="1"></field>
                                                <field name="tiempos_id">
                                                    <tree>
                                                        <field name="create_date" string="Fecha"/>
                                                        <field name="tiempo"/>
                                                        <field name="contador"/>
                                                    </tree>
                                                </field>
<!--                                                <field name="tiempo_total" />-->
                                                <field name="permiso" invisible="1"/>

                                            </group>
                                        </form>

                                    </field>
                                </page>

                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
    </data>

</odoo>
